<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
            integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
            crossorigin="anonymous">
    </script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=places&key=AIzaSyDX02F5Z4U83fevL63h0sIKVde5iqwDmr4"></script>
    <script src="../Scripts/ajaxCalls.js"></script>
    <script src="../Scripts/pagesScripts/register.js"></script>
    <!--<script src="../Scripts/News.js"></script>-->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="../Stylesheets/jquery.notifyBar.css">
    <script src="../Scripts/pagesScripts/alerts.js"></script>
    <script src="../Scripts/jquery.notifyBar.js"></script>
    <link href="../Stylesheets/StyleSheet.css" rel="stylesheet" />
</head>
<body>

    <div id="news">

    </div>

    <script>
        //const dog = { name: "tributo", age: 10 };
        //const { age } = dog;(=10)

        const getNews1 = async () => { 
            
            const url = `https://newsapi.org/v2/everything?q=movie&from=2021-05-21&sortBy=publishedAt&apiKey=e9657119e6324c7daa3dd0d6d06567a1&source=google-news`;
            const res = await fetch(url); //פונקציה שיש בדפדפן המקבלת כתובת ומחזירה את התוכן שלו.
            // await תמשיך לשורה הבאה רק כאשר התוכן נטען במלואו
            const { articles } = await res.json();  //לוקחים רק את articles מבין כל השדות שיש בכתובת.
            return articles;
        };

        const createNewsItemEl = ({ description, title, url, urlToImage }) => {
            const d = document.createElement("div");
            d.innerHTML = `
<div><a href="${url}" target="_blank">${title}</a><div>
<div>${description}<div>
<img src="${urlToImage}" style="width:100px"/>

`;
            return d;
        };

        getNews1().then((news) => { // שיטה מודרנית לפונקצית הצלחה
            console.log(news)
            const cont = document.getElementById("news");
            for (const news_item of news) {
                cont.appendChild(createNewsItemEl(news_item));

            }
        }).catch(console.error);
    </script>


</body>
</html>